<% if @comment.parent.blank? %>
  <% case @comment.opinion_type
    when "positive" %>
      $('.comments_section:eq(0)').append("<%= escape_javascript(render 'parent_comment', comment: @comment) %>");
      $('.opinion_tab:eq(0) div:eq(1)').text("<%= @comments.length %>");
    <% when "negative" %>
      $('.comments_section:eq(1)').append("<%= escape_javascript(render 'parent_comment', comment: @comment) %>");
      $('.opinion_tab:eq(1) div:eq(1)').text("<%= @comments.length %>");
    <% when "question" %>
      $('.comments_section:eq(2)').append("<%= escape_javascript(render 'parent_comment', comment: @comment) %>");
      $('.opinion_tab:eq(2) div:eq(1)').text("<%= @comments.length %>");
  <% end %>
  $('.comment_form textarea').val("");
<% else %>
  $('div[data-parent-comment-id=<%= @comment.parent_id %>] .comment_children').
    append("<%= escape_javascript(render 'comment', comment: @comment) %>");
  $('div[data-comment-id=' + <%= @comment.parent_id %> + '] .reply_form').hide();
  $('div[data-comment-id=' + <%= @comment.parent_id %> + '] .reply_form textarea').val("");
<% end %>
$('div[data-comment-id=' + <%= @comment.id %> + ']').get(0).
  scrollIntoView({behavior: 'smooth', block: 'center'});
